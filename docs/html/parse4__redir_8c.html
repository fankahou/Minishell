<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Minishell: parse4_redir.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Minishell
   </div>
   <div id="projectbrief">A simple UNIX shell</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('parse4__redir_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">parse4_redir.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="minishell_8h_source.html">minishell.h</a>&quot;</code><br />
</div>
<p><a href="parse4__redir_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4fbfc71c6650a29cec6957244dad9da0" id="r_a4fbfc71c6650a29cec6957244dad9da0"><td class="memItemLeft" align="right" valign="top">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD=======&gt; &gt; &gt; &gt; &gt; &gt; static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4fbfc71c6650a29cec6957244dad9da0">ft_redir_in1</a> (<a class="el" href="structt__token.html">t_token</a> *token, int type, char *new, int k)</td></tr>
<tr class="memdesc:a4fbfc71c6650a29cec6957244dad9da0"><td class="mdescLeft">&#160;</td><td class="mdescRight">2nd part of <a class="el" href="#a1c556bb21d138f07864a153bcf070c1f" title="Redirect input.">ft_redir_in()</a>  <br /></td></tr>
<tr class="separator:a4fbfc71c6650a29cec6957244dad9da0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c556bb21d138f07864a153bcf070c1f" id="r_a1c556bb21d138f07864a153bcf070c1f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1c556bb21d138f07864a153bcf070c1f">ft_redir_in</a> (<a class="el" href="structt__token.html">t_token</a> *token, int type, char *file, int k)</td></tr>
<tr class="memdesc:a1c556bb21d138f07864a153bcf070c1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Redirect input.  <br /></td></tr>
<tr class="separator:a1c556bb21d138f07864a153bcf070c1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48aa7a497766a3c818f2e10c539c1eb0" id="r_a48aa7a497766a3c818f2e10c539c1eb0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a48aa7a497766a3c818f2e10c539c1eb0">ft_redir_out</a> (<a class="el" href="structt__token.html">t_token</a> *token, int type, char *file, int k)</td></tr>
<tr class="memdesc:a48aa7a497766a3c818f2e10c539c1eb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">redirect output  <br /></td></tr>
<tr class="separator:a48aa7a497766a3c818f2e10c539c1eb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3aa43e269a1735f3ffca2ca30608e12" id="r_ad3aa43e269a1735f3ffca2ca30608e12"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad3aa43e269a1735f3ffca2ca30608e12">redir</a> (char *temp, <a class="el" href="structt__token.html">t_token</a> *token, int k)</td></tr>
<tr class="memdesc:ad3aa43e269a1735f3ffca2ca30608e12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check token syntax for redirections.  <br /></td></tr>
<tr class="separator:ad3aa43e269a1735f3ffca2ca30608e12"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1c556bb21d138f07864a153bcf070c1f" name="a1c556bb21d138f07864a153bcf070c1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c556bb21d138f07864a153bcf070c1f">&#9670;&#160;</a></span>ft_redir_in()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ft_redir_in </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structt__token.html">t_token</a> *</td>          <td class="paramname"><span class="paramname"><em>token</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>type</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>file</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>k</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Redirect input. </p>
<p>Free the previous filename if a new input file exists within the same pipe and close fd if the previous syntax is a heredoc. calloc and clean the name later, no expand for heredoc. No expansions of $USER for eof, only quites and space at the end.</p>
<dl class="section author"><dt>Author</dt><dd>kfan</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">token</td><td>command token </td></tr>
    <tr><td class="paramname">type</td><td>foo </td></tr>
    <tr><td class="paramname">file</td><td>path to infile </td></tr>
    <tr><td class="paramname">k</td><td>foo </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">success</td><td>Returns 0 on success, -1 otherwise. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="parse4__redir_8c_source.html#l00085">85</a> of file <a class="el" href="parse4__redir_8c_source.html">parse4_redir.c</a>.</p>

<p class="reference">References <a class="el" href="minishell_8h_source.html#l00172">t_token::cmds</a>, <a class="el" href="minishell_8h_source.html#l00182">t_token::data</a>, <a class="el" href="minishell_8h_source.html#l00077">t_cmds::fd</a>, <a class="el" href="minishell_8h_source.html#l00127">t_data::fd</a>, <a class="el" href="ft__calloc_8c_source.html#l00015">ft_calloc()</a>, <a class="el" href="parse4__redir_8c_source.html#l00039">ft_redir_in1()</a>, <a class="el" href="minishell_8h_source.html#l00078">t_cmds::infile</a>, and <a class="el" href="minishell_8h_source.html#l00076">t_cmds::redir</a>.</p>

<p class="reference">Referenced by <a class="el" href="parse4__redir_8c_source.html#l00161">redir()</a>.</p>

</div>
</div>
<a id="a4fbfc71c6650a29cec6957244dad9da0" name="a4fbfc71c6650a29cec6957244dad9da0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fbfc71c6650a29cec6957244dad9da0">&#9670;&#160;</a></span>ft_redir_in1()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD======= &gt; &gt; &gt; &gt; &gt; &gt; static int ft_redir_in1 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structt__token.html">t_token</a> *</td>          <td class="paramname"><span class="paramname"><em>token</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>type</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>new</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>k</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>2nd part of <a class="el" href="#a1c556bb21d138f07864a153bcf070c1f" title="Redirect input.">ft_redir_in()</a> </p>
<p>Check if the input is a heredoc or a regular infile. Clean the name, no expand for heredoc. Check if the file can be opened.</p>
<dl class="section author"><dt>Author</dt><dd>kfan</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">token</td><td>command token </td></tr>
    <tr><td class="paramname">type</td><td>foo </td></tr>
    <tr><td class="paramname">new</td><td>path to the infile </td></tr>
    <tr><td class="paramname">k</td><td>foo </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">success</td><td>Returns 0 on success, 1 otherwise. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="parse4__redir_8c_source.html#l00039">39</a> of file <a class="el" href="parse4__redir_8c_source.html">parse4_redir.c</a>.</p>

<p class="reference">References <a class="el" href="parse6__clean__name_8c_source.html#l00229">clean_name()</a>, <a class="el" href="parse6a__clean__name__no__expand_8c_source.html#l00066">clean_name_no_expand()</a>, <a class="el" href="minishell_8h_source.html#l00172">t_token::cmds</a>, <a class="el" href="minishell_8h_source.html#l00077">t_cmds::fd</a>, <a class="el" href="parse4a__redir__heredoc_8c_source.html#l00176">ft_heredoc()</a>, <a class="el" href="minishell_8h_source.html#l00078">t_cmds::infile</a>, <a class="el" href="error__mini_8c_source.html#l00128">open_error()</a>, and <a class="el" href="minishell_8h_source.html#l00076">t_cmds::redir</a>.</p>

<p class="reference">Referenced by <a class="el" href="parse4__redir_8c_source.html#l00085">ft_redir_in()</a>.</p>

</div>
</div>
<a id="a48aa7a497766a3c818f2e10c539c1eb0" name="a48aa7a497766a3c818f2e10c539c1eb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48aa7a497766a3c818f2e10c539c1eb0">&#9670;&#160;</a></span>ft_redir_out()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ft_redir_out </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structt__token.html">t_token</a> *</td>          <td class="paramname"><span class="paramname"><em>token</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>type</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>file</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>k</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>redirect output </p>
<p>Free the previous filename if a new output file exists within the same pipe, parsing the type into the token struct. calloc and clean the name, then create and truncate the file if necessary. Put the outfile name back to the raw name for later processing before pipex because of splitting and wildcards.</p>
<dl class="section author"><dt>Author</dt><dd>kfan</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">token</td><td>command token </td></tr>
    <tr><td class="paramname">type</td><td>foo </td></tr>
    <tr><td class="paramname">file</td><td>path to output </td></tr>
    <tr><td class="paramname">k</td><td>foo </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="parse4__redir_8c_source.html#l00121">121</a> of file <a class="el" href="parse4__redir_8c_source.html">parse4_redir.c</a>.</p>

<p class="reference">References <a class="el" href="parse6__clean__name_8c_source.html#l00229">clean_name()</a>, <a class="el" href="minishell_8h_source.html#l00172">t_token::cmds</a>, <a class="el" href="ft__calloc_8c_source.html#l00015">ft_calloc()</a>, <a class="el" href="minishell_8h_source.html#l00079">t_cmds::outfile</a>, <a class="el" href="pipex_8c_source.html#l00017">outfile()</a>, and <a class="el" href="minishell_8h_source.html#l00076">t_cmds::redir</a>.</p>

<p class="reference">Referenced by <a class="el" href="parse4__redir_8c_source.html#l00161">redir()</a>.</p>

</div>
</div>
<a id="ad3aa43e269a1735f3ffca2ca30608e12" name="ad3aa43e269a1735f3ffca2ca30608e12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3aa43e269a1735f3ffca2ca30608e12">&#9670;&#160;</a></span>redir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int redir </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>temp</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structt__token.html">t_token</a> *</td>          <td class="paramname"><span class="paramname"><em>token</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>k</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check token syntax for redirections. </p>
<p>Check the kind of syntax in the token, check if it is valid (file name followed by a redirection operator), strdup the raw filename and put them to process.</p>
<dl class="section author"><dt>Author</dt><dd>kfan</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">temp</td><td>foo </td></tr>
    <tr><td class="paramname">token</td><td>command token </td></tr>
    <tr><td class="paramname">k</td><td>foo </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">success</td><td>Returns 0 on success, -1 otherwise. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="parse4__redir_8c_source.html#l00161">161</a> of file <a class="el" href="parse4__redir_8c_source.html">parse4_redir.c</a>.</p>

<p class="reference">References <a class="el" href="minishell_8h_source.html#l00172">t_token::cmds</a>, <a class="el" href="minishell_8h_source.html#l00077">t_cmds::fd</a>, <a class="el" href="parse4__redir_8c_source.html#l00085">ft_redir_in()</a>, <a class="el" href="parse4__redir_8c_source.html#l00121">ft_redir_out()</a>, <a class="el" href="ft__strdup_8c_source.html#l00015">ft_strdup()</a>, <a class="el" href="utils__is_8c_source.html#l00134">is_space()</a>, <a class="el" href="utils__is_8c_source.html#l00050">is_sym()</a>, <a class="el" href="utils__count_8c_source.html#l00036">sym_count()</a>, and <a class="el" href="error_8c_source.html#l00032">syntax_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="parse3__make__cmd__list_8c_source.html#l00079">scan_pipe()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="parse4__redir_8c.html">parse4_redir.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
