<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Minishell: Minishell</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Minishell
   </div>
   <div id="projectbrief">A simple UNIX shell</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Minishell</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a> 42 assignment to do a simple shell, similar to Bash.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Instructions</h1>
<p>Instructions to complete the project (copied from the subject)</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Allowed functions</h2>
<p>The following functions are able to be used freely in the project.</p><ul>
<li>readline</li>
<li>rl_clear_history</li>
<li>rl_on_new_line</li>
<li>rl_replace_line</li>
<li>rl_redisplay</li>
<li>add_history</li>
<li>printf</li>
<li>malloc</li>
<li>free</li>
<li>write</li>
<li>access</li>
<li>open</li>
<li>read,</li>
<li>close</li>
<li>fork</li>
<li>wait</li>
<li>waitpid</li>
<li>wait3</li>
<li>wait4</li>
<li>signal</li>
<li>sigaction</li>
<li>sigemptyset</li>
<li>sigaddset</li>
<li>kill</li>
<li>exit</li>
<li>getcwd</li>
<li>chdir</li>
<li>stat</li>
<li>lstat</li>
<li>fstat</li>
<li>unlink</li>
<li>execve</li>
<li>dup</li>
<li>dup2</li>
<li>pipe</li>
<li>opendir</li>
<li>readdir</li>
<li>closedir</li>
<li>strerror</li>
<li>perror</li>
<li>isatty</li>
<li>ttyname</li>
<li>ttyslot</li>
<li>ioctl</li>
<li>getenv</li>
<li>tcsetattr</li>
<li>tcgetattr</li>
<li>tgetent</li>
<li>tgetflag</li>
<li>tgetnum</li>
<li>tgetstr</li>
<li>tgoto</li>
<li>tputs</li>
</ul>
<p>Additionally, the use of libft is authorized.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Required features</h2>
<p>These features are required for the mandatory part</p>
<h3><a class="anchor" id="autotoc_md4"></a>
General requirements:</h3>
<ul>
<li>Display a <b>prompt</b> when waiting for a new command.</li>
<li>Have a working <b>history</b>.</li>
<li>Search and launch the right executable (based on the <code>PATH</code> variable or using a relative or absolute path).</li>
<li>Avoid using more than <b>one global variable</b> to indicate a received signal. Consider the implications: this approach ensures that your signal handler will not access your main data structures.</li>
<li>Not interpret unclosed quotes or special characters which are not required by the subject such as \ (backslash) or ; (semicolon).</li>
<li>Handle ’ (single quote) which should prevent the shell from interpreting the meta- characters in the quoted sequence.</li>
<li>Handle " (double quote) which should prevent the shell from interpreting the meta- characters in the quoted sequence except for $ (dollar sign).

@subsubsection autotoc_md5 Implement redirections:
- &lt; should redirect input.
- \&gt; should redirect output.
- &lt;&lt; should be given a delimiter, then read the input until a line containing the
delimiter is seen. However, it doesn’t have to update the history!
- \&gt;\&gt; should redirect output in append mode.

- Implement &lt;strong&gt;pipes&lt;/strong&gt; (| character). The output of each command in the pipeline is connected to the input of the next command via a pipe.
- Handle &lt;strong&gt;environment variables&lt;/strong&gt; (&lt;tt&gt;\$&lt;/tt&gt; followed by a sequence of characters) which should expand to their values.
- Handle &lt;tt&gt;\$?&lt;/tt&gt; which should expand to the exit status of the most recently executed
foreground pipeline.
- Handle &lt;tt&gt;ctrl-C&lt;/tt&gt;, &lt;tt&gt;ctrl-D&lt;/tt&gt; and &lt;tt&gt;ctrl-\\&lt;/tt&gt; which should behave like in bash.

Required commands:
- &lt;tt&gt;echo&lt;/tt&gt; with option &lt;tt&gt;-n&lt;/tt&gt;
- &lt;tt&gt;cd&lt;/tt&gt; with only a relative or absolute path
- &lt;tt&gt;pwd&lt;/tt&gt; with no options
- &lt;tt&gt;export&lt;/tt&gt; with no options
- &lt;tt&gt;unset&lt;/tt&gt; with no options
- &lt;tt&gt;env&lt;/tt&gt; with no options or arguments
- &lt;tt&gt;exit&lt;/tt&gt; with no options

@subsubsection autotoc_md6 Additional infos

The readline() function can cause memory leaks. You don’t have to fix them. But that doesn’t mean your own code, yes the code you wrote, can have memory leaks.

@subsection autotoc_md7 Bonus part

Your program has to implement:
- &lt;tt&gt;\&amp;\&amp;&lt;/tt&gt; and &lt;tt&gt;||&lt;/tt&gt; with parenthesis for priorities.
- Wildcards &lt;tt&gt;*&lt;/tt&gt; should work for the current working directory.

@section autotoc_md8 Development notes

This is just a section to put thoughts and info on how we want the code to look (basically our own norm).

\&gt; kmautner

I suggest we have a file structure along the lines of "{repo root}/feature_name/feature.c".
Also, since I have a tendency to write spaghetti code, I'll do my best to add documentation to everything.

If an error occurs, I propose we don't exit the program immediately, but instead pass the error code up
the call stack until we reach a significant function and exit there. This allows it so that each of the
called functions can print their own error message, giving us a simple stack trace.
For example: If the call stack looks like this...
@icode{c} 
main()
    init()
        load_configs()
            get_config_file()
                read_data()
                    readline()
@endicode 
... and &lt;tt&gt;readline()&lt;/tt&gt; fails, an error code would be passed up all the way to &lt;tt&gt;init()&lt;/tt&gt; or &lt;tt&gt;main()&lt;/tt&gt;,
each called function printing their own error message as they pass it along.
The terminal ouput would then look something like this:
@icode 
Error
unable to read data
unable to read config file
unable to load configs
failed to initialize configs
init fail
@endicode 
&lt;tt&gt;readline()&lt;/tt&gt; fails, making &lt;tt&gt;read_data()&lt;/tt&gt; print "unable to read data" in the terminal and return an error code, prompting &lt;tt&gt;get_config_file()&lt;/tt&gt; to print its own error message, etc. all the way up to the main
function where the program exits.



@section autotoc_md9 TODO:
- updated log, those are errors in tester, warning: most of them are things that we didnt implement or shits that I don't think it's neccesary to fix, we need to discuss.
- Documentation
- Implement "-c" flag for minishell (ex: minishell -c "echo 123")
- Norm and clean up main.c \ pipex_input.c \ signals1.c
- Run tester (and fix anything that comes up)
- implement cd ~? it's not so easy as it expands like envp or * but not from envp?? how?? probably like pwd if getcwd fails that the path is stored somewhere secretly

17.04.2025 (kmautner)
- added &lt;tt&gt;rm .minishell_history&lt;/tt&gt; to &lt;tt&gt;make fclean&lt;/tt&gt;

16.4.2025: (Ka Hou)
- str_equals cleaned up in the if statements in pipex_input file, check_builtins()
- env should throw error if there is an arg? (except &amp;ndash;?)
- pwd should throw error if there is an arg? (except &amp;ndash;?)
- handled all "-" errors in builtins and "--" for no flag
- Signal handlings: ignore ctrl + \ only before execve, in exeve you need it!
- Signal handlings: minishell withn minishell &gt; ignore all signals in parent while waitpid
- fixed small bug eg. echo 1 || echo 2 || echo 3, changed if statement to while

15.4.2025: (Ka Hou)
- fixed minor bugs in bonus wildcards and &amp;&amp; ||

14.4.2025: (Ka Hou)
- fixed envp expansion...this is crazy

12.4.2025: (Ka Hou)
- fixed minor bug in cd
- fixed export T="l"; $Ts eg. $STH, at the end utils_join to check if the $STH is empty
- fixed evnp_expand eg. echo $A$]23
- fixed empty space in envp split eg. export T=-nnnnnnnn"nnnnnnn "; echo $T
- fixed if exit code &gt; 255, temp % 256;
- fixed cd - (print OLDPWD before chdir) and cd &amp;ndash; (works like cd alone)
- fixed potential leak in scan pipe
- fixed envp split bug eg. export X=" A B "; echo "1"$X'2'

11.4.2025: (Ka Hou)
- I removed the if (!nptr[i]) digit_cmd++; line in the pre long int overflow checker as it will be incremented in the main checker anyway, now everything works
- updated the perror() for exit() to write()
- Norm cleanup
- exit -00000000000000000000000000000000000000000000000 doesn't work probably we broke sth today with the long overflow thing

10.4.2025:
- Rewrote long int overflow checker (needs review for implementation)
- Added some more documentation, sadly not much tho cause I still have trouble understanding most of the code.

Apr 9 fixed:
- Fix heredocs
- New clean_name_no_expand file
- Fix pipes (yes again...)
- Fix waitpid
- Fix exit code

//new to do list April 7
// &lt;&lt;eof &lt; hello cat |echo 123 --- ctrl + d eof warning comes before STDOUT, bash error comes after STDOUT
//ctrl + c then &lt;&lt;eof cat and ctrl + c/ or d then ctrl + c, why extra \n???? after changing gnl to readline in here_doc
// to Koloman: please check the add_history empty line thing if there is leak, thanks!

//fixed April 7
//signals
//cat | echo 123
//waitpid
// ctrl + \ should do nth in minishell and heredoc!

//to do list 3 April
// mkdir a a/b; cd a/b; rm -rf ../../a; unset PWD; unset OLDPWD; pwd
// cat /dev/random | head -c 100 | wc -c // waitpid ??? signal?
// ls '" and ls "' // just leave it as it is?

fixed 2 April
// echo hello $NOT_A_VAT $NOT_A_VAT $NOT_A_VAT// with space handling still one last space left
// export L="ls -la"; $L // change tree order and split? // unset HOME; cd $HOME // also unset PATH // just leave it as it is?</li>
</ul>
<p>fixed: 1 April //.. &gt; hardcoded // export A=a A2=a; unset A; echo $A $A2 // also space handling // exit -9223372036854775808 // hardcoded LONG_MIN // check pipes forbitten files // this was tricky // &lt; valid_finfile_1 cat &gt;outfile1 // if open failed just continue? no return 1? // and this one too, so weird // cat &lt; forbidden_file: echo $? // also ./forbidden_file // easy fix at the end of the child </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
